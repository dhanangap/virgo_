@import "../../defaults.scss";

body[data-preloader] {

	> *:not(.preloader) {
		visibility: hidden;
	}

	> .preloader {
		display			: flex;
		flex-direction	: column;
		align-items		: center;
		justify-content	: center;

		position		: fixed;
		top				: 0;
		right			: 0;
		bottom			: 0;
		left			: 0;
		z-index			: 9800;
		overflow		: hidden;
		opacity			: 1;

		color			: var(--color-primary-text, #333);

		.background {
			position	: absolute;
			top			: 0;
			left		: 0;
			width		: 100%;
			height		: 100%;
			z-index		: 9801;

			> div {
				background-color: var(--color-primary, #f8f8f8);
			}
		}

		.spinner {
			position		: absolute;
			width			: 118px;
			height			: 118px;
			border			: 2px solid var(--color-primary-text, #333);
			border-radius	: 50%;
			z-index			: 9900;
			transition		: all 0.3s ease-out;

			> div {
				position			: absolute;
				top					: 0;
				left				: 57px;
				width				: 2px;
				height				: 12px;
				background-color	: #fff;
				transform-origin	: 50% 57px;
				transform			: rotate(0);
				animation-duration	: 1.2s;
			}

			> div:first-child {
				z-index: 9999;
			}

			@for $i from 1 through 12 {
				> div:nth-child(#{$i}) {
					animation-name				: spinnerRotate;
					animation-iteration-count	: infinite;
					animation-timing-function	: cubic-bezier((0.5 + ($i * 0.05)), 0, (0.5 + ($i * 0.03)), 1);
					opacity						: (1.1 - ($i * 0.1));
				}
			}
		}

		.loading-text {
			position	: absolute;
			font-weight	: 600;
			z-index		: 9998;
			transition	: all 0.3s ease-out;
		}

	}

	&[data-preloader="loading"] {
		> *:not(.preloader) {
			overflow: hidden;
		}
	}

	&[data-preloader="finishing"] {
		> *:not(.preloader) {
			visibility: visible;
		}
		> .preloader {
			.spinner, .loading-text {
				opacity: 0;
			}
		}
	}

	&[data-preloader="finished"] {
		> .preloader {
			display: none;
		}
	}

}

@keyframes spinnerRotate {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}
