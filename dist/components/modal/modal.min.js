class Modal{static index;static containerElement;static backdropElement;static openModal;element;id;transition;duration;toggleElements;get state(){return this.element.dataset.state}set state(t){this.element.dataset.state=t}static init(){this.index=[],this.initContainer(),this.initBackdrop();var e=document.querySelectorAll(".modal");for(let t=0;t<e.length;t++){var i=e[t];this.index.push(new this(t,i))}this.openModal=null,this.initModalToggles()}static getById(e){return this.index.find(t=>t.id===e)}static initContainer(){this.containerElement||(this.containerElement=document.querySelector(".modal-container"),this.containerElement||(this.containerElement=document.createElement("div"),this.containerElement.classList.add("modal-container"),this.containerElement.dataset.state="hidden",document.body.appendChild(this.containerElement)))}static initBackdrop(){this.containerElement&&(this.backdropElement=this.containerElement.querySelector(".modal-backdrop"),this.backdropElement||(this.backdropElement=document.createElement("div"),this.backdropElement.classList.add("modal-backdrop"),this.containerElement.appendChild(this.backdropElement)))}static initModalToggles(){for(let e of document.querySelectorAll("[data-modal-toggle]")){const t=this.index.find(t=>t.id===e.dataset.modalToggle);t&&e.addEventListener("click",()=>{t.toggle()})}}static openContainer(){this.containerElement.dataset.state="visible",this.containerElement.animate([{opacity:0},{opacity:1}],{duration:300,easing:"ease-out"})}static closeContainer(){this.containerElement.animate([{opacity:1},{opacity:0}],{duration:300,easing:"ease-out"}),setTimeout(()=>{this.containerElement.dataset.state="hidden",this.openModal=null},300)}static closeAll(){}static open(t,e=void 0){let i=this.getById(t);i&&i.open(e)}static close(t){let e=this.getById(t);moda&&e.close()}constructor(t,e){this.element=e,this.id=this.element.id||"modal-"+t,this.element.id=this.id,this.transition=this.element.dataset.transition||"fade",this.duration=this.element.dataset.duration?parseInt(this.element.dataset.duration):300,this.state="closed",Modal.containerElement.appendChild(this.element);let i=this.element.querySelector("button.close");i&&i.addEventListener("click",()=>{this.close()})}open(t=0){Modal.openContainer(),"none"!==this.transition&&(this.element.animate([{opacity:0},{opacity:1}],{duration:this.duration,easing:"ease-out"}),this.element.style.opacity=1),this.state="open"}close(){"none"!==this.transition&&(this.element.animate([{opacity:1},{opacity:0}],{duration:this.duration,easing:"ease-out"}),this.element.style.opacity=0),setTimeout(()=>{this.state="closed",Modal.closeContainer()},this.duration)}toggle(t=void 0){"closed"===this.state?this.open(t):this.close()}}window&&(window.Modal=Modal);export{Modal};