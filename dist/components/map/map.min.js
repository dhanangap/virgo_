class Map{static apiKey;static initCallback;static isInitialized=!1;static registry=[];static Popup;static init(t,i=void 0){t.apiKey?(this.apiKey=t.apiKey,i&&(this.initCallback=i),this.loadScript()):console.error("Please provide Google Maps JavaScript API Key.")}static loadScript(){let t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${this.apiKey}&libraries=drawing&callback=Map.loaded`,t.async=!0,document.head.appendChild(t)}static loaded(){this.isInitialized=!0,this.Popup=class extends google.maps.OverlayView{position;container;constructor(t,i,e){super(),this.position=t,this.container=document.createElement("div"),this.container.classList.add("popup-container");const s=document.createElement("div");if(s.classList.add("popup-tip"),this.container.appendChild(s),"string"==typeof i){const o=document.createElement("div");o.classList.add("popup-content"),o.innerHTML=nunjucks.renderString(i,e),s.appendChild(o)}else{const a=i.cloneNode(!0);a.classList.add("popup-content"),s.appendChild(a)}this.constructor.preventMapHitsAndGesturesFrom(this.container)}onAdd(){this.getPanes().floatPane.appendChild(this.container)}onRemove(){this.container.parentElement&&this.container.parentElement.removeChild(this.container)}draw(){var t=this.getProjection().fromLatLngToDivPixel(this.position);this.container.style.left=t.x+"px",this.container.style.top=t.y+"px"}},this.initCallback&&this.initCallback()}id;element;map;center;zoom;mapConfig;locations;customMarker;customMarkerClickEvent;customPopup;constructor(t,i){this.constructor.isInitialized?(this.element=document.querySelector(t),this.element?(this.id=this.element.id||"map-"+this.constructor.registry.length,this.element.id=this.id,i.mapConfig&&(this.mapConfig=i.mapConfig),this.center=i.center||this.mapConfig.center,this.zoom=i.zoom||this.mapConfig.zoom,this.map=new google.maps.Map(this.element,{...this.mapConfig,center:this.center,zoom:this.zoom}),this.locations=[],this.customMarker=i.customMarker||void 0,this.customMarkerClickEvent=i.customClickEvent?i.customMarkerClickEvent:void 0,this.customPopup=i.customPopup||void 0,i.locations&&i.locations.forEach(t=>{var i="location-"+this.locations.length;new MapLocation(i,this,{...t,customClickEvent:this.customMarkerClickEvent})}),this.map.addListener("click",()=>{this.locations.forEach(t=>{t.removePopup()})})):console.error(`Element with selector ${t} is not found.`)):console.error("Please initialize Map class first using Map.init(config).")}pan(t){this.map.panTo(new google.maps.LatLng(t.lat+.085,t.lng-.06))}}class MapLocation{id;title;address;position;photos;phone;data;parentMap;marker;popup;customClickEvent;externalTriggers;constructor(t,i,e){this.parentMap=i,this.id=t,this.title=e.title||null,this.address=e.address||null,this.photos=e.photos||[],this.phone=e.phone||[],this.data=e.data||{},e.photo&&this.photos.push(e.photo),this.externalTriggers=[],this.position={lat:e.lat,lng:e.lng},this.drawMarker(),this.parentMap.locations.push(this)}drawMarker(){let t={position:this.position,map:this.parentMap.map};this.parentMap.customMarker&&(t.icon=this.parentMap.customMarker),this.marker=new google.maps.Marker(t),this.marker.addListener("click",()=>{this.markerClicked()})}markerClicked(){this.parentMap.pan(this.position),this.parentMap.locations.forEach(t=>{t.removePopup()}),this.parentMap.customPopup&&this.drawPopup(),this.customClickEvent&&this.customClickEvent(),this.externalTriggers.forEach(t=>{t.eventHandler&&t.eventHandler()})}triggerMarkerClick(){this.markerClicked()}drawPopup(){this.popup=new Map.Popup(new google.maps.LatLng(this.position.lat,this.position.lng),this.parentMap.customPopup,{title:this.title,address:this.address,photos:this.photos,phone:this.phone}),this.popup.setMap(this.parentMap.map)}removePopup(){this.popup&&this.popup.setMap(null)}registerTrigger(t,i=void 0){t.addEventListener("click",()=>{this.triggerMarkerClick()}),this.externalTriggers.push({element:t,eventHandler:i})}}window.Map=Map,window.MapLocation=MapLocation;export{Map,MapLocation};