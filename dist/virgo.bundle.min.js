!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Virgo=e():t.Virgo=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Dropdown:()=>a,Tab:()=>h});class s{constructor(t,e={}){const s=e.id?e.id:void 0;this.element=t,this.id=this.element.id?this.element.id:s,this.selector=e.selector?e.selector:void 0,this.data={},this.config=e,this.id&&(this.element.id=this.id)}static generateId(){return this.className+"-"+this.registry.length}static init(t,e){const s=t||`.${this.className}`,i=document.querySelectorAll(s);this.registry[this.className]||(this.registry[this.className]=[]);const n=this.registry[this.className];for(const t of i)n.push(new this(t,Object.assign(Object.assign(Object.assign({},t.dataset),e),{selector:s,id:this.generateId()})))}static get instances(){return this.registry[this.className]}}s.className="component",s.registry={};class i extends s{constructor(t,e){super(t,e),e&&(this.parent=e.parent),this.element.addEventListener("click",(()=>{this.parent.toggleOpen()}))}}class n extends s{constructor(t,e){super(t,e),e&&(this.parent=e.parent?e.parent:void 0)}updatePosition(){const t=this.parent.element.getBoundingClientRect();this.element.style.top=t.top+t.height+5+"px",this.element.style.left=t.left+"px",this.element.style.width=t.width+"px"}}class a extends s{constructor(t,e){super(t,e),this.transition="none",e&&(this.transition=e.transition?e.transition:"none");let s=this.element.querySelector(".dropdown-menu");s||(s=this.element.querySelector(".dropdown-content")),this.button=new i(this.element.querySelector("button"),{parent:this}),this.menu=new n(s,{parent:this})}static init(t,e){super.init(t,e),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.closeAll()})),document.addEventListener("click",(t=>{this.isInsideDropdown(t.x,t.y)||this.closeAll()})),document.addEventListener("scroll",(t=>{this.instances.filter((t=>t.isOpen)).forEach((t=>{t.menu.updatePosition()}))}))}static closeAll(){for(const t of this.instances)t.close()}static isInsideDropdown(t,e){let s=!1,i=0;for(;!1===s&&i<this.instances.length;){const n=this.instances[i],a=n.element.getBoundingClientRect(),o=n.menu.element.getBoundingClientRect(),l=0===o.left?a.left:Math.min(o.left,a.left),r=0===o.right?a.right:Math.max(o.right,a.right),h=0===o.top?a.top:Math.min(o.top,a.top),c=0===o.bottom?a.bottom:Math.max(o.bottom,a.bottom);s=t>=l&&t<=r&&e>=h&&e<=c,i++}return s}get isOpen(){return"open"===this.element.dataset.state}set isOpen(t){t?(this.element.dataset.state="open",document.body.appendChild(this.menu.element),this.menu.updatePosition()):(this.element.appendChild(this.menu.element),this.element.removeAttribute("data-state"))}toggleOpen(){this.isOpen=!this.isOpen}close(){this.isOpen=!1}}a.className="dropdown";class o extends s{constructor(t,e){super(t,e),e&&(this.tab=e.tab,this.target=e.target),void 0!==this.target&&(this.element.dataset.target=this.target+""),this.initEvents(),this.update()}get active(){return this.element.classList.contains("active")}set active(t){t?this.element.classList.add("active"):this.element.classList.remove("active")}initEvents(){this.element.addEventListener("click",(()=>{this.tab.goTo(this.target)}))}update(){this.active=this.target===this.tab.active}}class l extends s{constructor(t,e){super(t,e),this.buttons=[],e&&(this.tab=e.tab),this.initButtons("button"),this.initEvents(),this.update(),this.updateOverflowNav()}initButtons(t){const e=this.element.querySelectorAll(t);for(let s=0;s<e.length;s++)this.buttons.push(new o(e[s],{selector:t,id:e[s].id?e[s].id:void 0,tab:this.tab,target:s}))}initEvents(){this.element.addEventListener("scroll",(t=>{this.updateOverflowNav()}))}update(){this.element.scrollWidth>this.element.offsetWidth?this.addOverflowNav():this.removeOverflowNav()}addOverflowNav(){if(!this.tab.element.querySelector(".tab-nav-overflow")){let t=document.createElement("div");t.setAttribute("class","tab-nav-overflow"),t.innerHTML='<button class="tab-nav-prev"> <i class="icon">chevron_left</i> </button> <button class="tab-nav-next"> <i class="icon">chevron_right</i> </button>',this.tab.element.appendChild(t);const e=t.querySelector(".tab-nav-prev");e&&e.addEventListener("click",(()=>{this.element.scroll({left:this.element.scrollLeft-this.element.scrollWidth/3,behavior:"smooth"})}));const s=t.querySelector(".tab-nav-next");s&&s.addEventListener("click",(()=>{this.element.scroll({left:this.element.scrollLeft+this.element.scrollWidth/3,behavior:"smooth"})}))}}removeOverflowNav(){let t=this.tab.element.querySelector(".tab-nav-overflow");t&&t.remove()}updateOverflowNav(){if(this.element.scrollLeft>0){let t=this.tab.element.querySelector(".tab-nav-overflow .tab-nav-prev");t&&t.classList.remove("hidden")}else{let t=this.tab.element.querySelector(".tab-nav-overflow .tab-nav-prev");t&&t.classList.add("hidden")}if(this.element.scrollLeft<this.element.scrollWidth-this.element.offsetWidth){let t=this.tab.element.querySelector(".tab-nav-overflow .tab-nav-next");t&&t.classList.remove("hidden")}else{let t=this.tab.element.querySelector(".tab-nav-overflow .tab-nav-next");t&&t.classList.add("hidden")}}}class r extends s{constructor(t,e){super(t,e),e&&(this.tab=e.tab,this.index=e.index,this.active=null!=e.active&&e.active),void 0!==this.index&&(this.element.dataset.index=this.index.toString()),this.update()}get active(){return this.element.classList.contains("active")}set active(t){t?this.element.classList.add("active"):this.element.classList.remove("active")}update(){this.active=this.index===this.tab.active,this.element.classList.remove("before","after"),this.active||(this.index<this.tab.active?this.element.classList.add("before"):this.element.classList.add("after"))}}class h extends s{constructor(t,e){super(t,e),this.active=0,this.transition="none",this.nav=void 0,this.pages=[];let s=".nav",i=".pages .page";e&&(this.active=isNaN(parseInt(e.active))?e.active:parseInt(e.active),this.transition=e.transition?e.transition:"none",e.navSelector&&(s=e.navSelector),e.pageSelector&&(i=e.pageSelector)),this.initNav(s),this.initPages(i),this.initEvents(),this.updateHeight()}initNav(t){const e=this.element.querySelector(t);this.nav=new l(e,{selector:t,id:e.id?e.id:void 0,tab:this})}initPages(t){const e=this.element.querySelectorAll(t);for(let s=0;s<e.length;s++)this.pages.push(new r(e[s],{selector:t,id:e[s].id?e[s].id:void 0,tab:this,index:s,active:s===this.active}))}initEvents(){window&&window.addEventListener("resize",(()=>{this.updateHeight()}))}updateHeight(){let t=this.element.querySelector(".pages"),e=this.pages.find((t=>t.active));t&&e&&(t.style.height=e.element.scrollHeight+"px")}goTo(t){let e;this.pages.find((t=>t.index===this.active)),"number"==typeof t?e=this.pages.find((e=>e.index===t)):"string"==typeof t&&(e=this.pages.find((e=>e.id===t))),e&&(this.active=e.index,this.nav.buttons.forEach((t=>{t.update()})),this.pages.forEach((t=>{t.update()})),this.updateHeight())}}return h.className="tab",window&&window.addEventListener("DOMContentLoaded",(t=>{a.init(),h.init()})),e})()}));
//# sourceMappingURL=virgo.bundle.min.js.map