class Slider{static index;static externalIndicators;static externalNavigations;static defaultTransition;static defaultDuration;static defaultEasing;element;id;transition;duration;easing;activeSlideIndex;slides;slidesElement;controlElement;indicatorElement;navigationElement;navlock;scrollAmount;isScrolling;externalIndicators;externalNavigations;isFlexible;get totalSlides(){return this.slides.length}static init(){this.index=[],this.externalIndicators={},this.externalNavigations={},this.defaultTransition="slide",this.defaultDuration=1e3,this.defaultEasing="cubic-bezier(0.370, 0.140, 0.110, 0.995)";var i=document.querySelectorAll(".slider");if(0<i.length){for(let t=0;t<i.length;t++){var e=i[t];this.index.push(new this(t,e))}window.addEventListener("resize",()=>{this.resizeListener()})}this.initExternalIndicators(),this.initExternalNavigations()}static resizeListener(){for(const t of this.index)t.resize()}static initExternalIndicators(){for(const t of document.querySelectorAll("[data-slider-indicator]")){const i=t.dataset.sliderIndicator,e=this.index.find(t=>t.id===i);e&&(this.externalIndicators[i]||(this.externalIndicators[i]=[]),this.externalIndicators[i].push(t),e.initExternalIndicators())}}static initExternalNavigations(){for(const e of document.querySelectorAll("[data-slider-navigation]")){const s=e.dataset.sliderNavigation,a=this.index.find(t=>t.id===s);if(a){this.externalNavigations[s]||(this.externalNavigations[s]=[]),this.externalNavigations[s].push(e);let t=e.querySelector('[data-navigation="prev"]'),i=e.querySelector('[data-navigation="next"]');t&&t.addEventListener("click",()=>{a.back()}),i&&i.addEventListener("click",()=>{a.forward()})}}}constructor(t,i){this.element=i,this.id=i.id||"gallery-"+t,i.id=this.id,this.transition=i.dataset.transition||Slider.defaultTransition,this.duration=i.dataset.duration?parseInt(i.dataset.duration):Slider.defaultDuration,this.easing=i.dataset.easing||Slider.defaultEasing,this.activeSlideIndex=i.dataset.active?parseInt(i.dataset.active):0,this.isFlexible=!!i.classList.contains("flexible"),i.dataset.active=this.activeSlideIndex,this.slidesElement=this.element.querySelector(".slides"),this.slides=this.slidesElement.querySelectorAll(".slide"),this.navlock=!1,this.scrollAmount=0,this.initSlides(),this.resize(),this.initEventListeners()}initSlides(){for(let i=0;i<this.totalSlides;i++){let t=this.slides[i];i===this.activeSlideIndex&&t.classList.add("active")}}updateFlexibleSize(){var t;this.isFlexible&&(t=this.slides[this.activeSlideIndex].getBoundingClientRect().height,this.slidesElement.style.height=t+"px")}initControlElement(){this.controlElement||(this.controlElement=document.createElement("div"),this.controlElement.classList.add("control"),this.element.appendChild(this.controlElement))}initIndicator(){this.indicatorElement||(this.indicatorElement=document.createElement("div"),this.indicatorElement.classList.add("indicator"),this.controlElement.appendChild(this.indicatorElement)),this.indicatorElement.innerHTML="";for(let i=0;i<this.totalSlides;i++){let t=document.createElement("button");t.dataset.target=i,i===this.activeSlideIndex&&t.classList.add("active"),this.indicatorElement.appendChild(t),t.addEventListener("click",()=>{this.setActiveSlide(i)})}}initExternalIndicators(){if(Slider.externalIndicators[this.id])for(var e of Slider.externalIndicators[this.id]){e.innerHTML="";for(let i=0;i<this.totalSlides;i++){let t=document.createElement("button");t.dataset.target=i,i===this.activeSlideIndex&&t.classList.add("active"),e.appendChild(t),t.addEventListener("click",()=>{this.setActiveSlide(i)})}}}initNavigation(){this.navigationElement||(this.navigationElement=document.createElement("div"),this.navigationElement.classList.add("navigation"),this.controlElement.appendChild(this.navigationElement)),this.navigationElement.innerHTML="";let t=document.createElement("button");t.classList.add("prev"),this.navigationElement.appendChild(t),t.addEventListener("click",()=>{this.back()});let i=document.createElement("button");i.classList.add("next"),i.addEventListener("click",()=>{this.forward()}),this.navigationElement.appendChild(i)}initEventListeners(){this.element.addEventListener("wheel",t=>{0<Math.abs(t.deltaX)&&(t.preventDefault(),this.scroll(t.deltaX))}),this.element.addEventListener("touchstart",t=>{let e=t.touches[0].clientX;const i=t=>{var i=e-t.touches[0].clientX;this.scroll(i),e=t.touches[0].clientX},s=()=>{this.element.removeEventListener("touchmove",i),this.element.removeEventListener("touchend",s)};this.element.addEventListener("touchmove",i),this.element.addEventListener("touchend",s)})}resize(){0<this.totalSlides&&(this.updateFlexibleSize(),this.initControlElement(),this.initIndicator(),this.initNavigation(),this.initExternalIndicators())}setActiveSlide(t,i=null){var e,s;this.navlock||(e=this.slides[this.activeSlideIndex],s=this.slides[t],i=i||(t-this.activeSlideIndex)/Math.abs(t-this.activeSlideIndex),s&&(this.activeSlideIndex=t,this.navlock=!0,this.updateIndicator(),this.updateSlides(e,s,i),setTimeout(()=>{this.navlock=!1},this.duration+500)))}updateIndicator(){if(this.indicatorElement){var e=this.indicatorElement.querySelectorAll("button");for(let i=0;i<e.length;i++){let t=e[i];t.classList.remove("active"),i===this.activeSlideIndex&&t.classList.add("active")}}if(Slider.externalIndicators[this.id])for(const t of Slider.externalIndicators[this.id]){var s=t.querySelectorAll("button");for(let i=0;i<s.length;i++){let t=s[i];t.classList.remove("active"),i===this.activeSlideIndex&&t.classList.add("active")}}}updateSlides(t,i,e=1){this.slides&&("none"!==this.transition&&("slide"===this.transition||"default"===this.transition?(""===t.style.transform&&(t.style.transform="translate3d(0, 0, 0)"),""===i.style.transform&&(i.style.transform=`translate3d(${100*e}%, 0, 0)`),t.animate([{transform:t.style.transform,opacity:t.style.opacity},{transform:`translate3d(${-100*e}%, 0, 0)`,opacity:.33}],{duration:this.duration,easing:this.easing}),i.animate([{transform:i.style.transform,opacity:i.style.opacity},{transform:"translate3d(0, 0, 0)",opacity:1}],{duration:this.duration,easing:this.easing}),setTimeout(()=>{t.style.transform="",t.style.opacity=.33,i.style.transform="translate3d(0, 0, 0)",i.style.opacity=1},this.duration)):"fade"===this.transition&&(i.style.display="block",t.animate([{opacity:1},{opacity:0}],{duration:this.duration,easing:this.easing}),i.animate([{opacity:0},{opacity:1}],{duration:this.duration,easing:this.easing}),setTimeout(()=>{t.style.display="none",t.style.opacity=0,i.style.display="block",i.style.opacity=1},this.duration))),setTimeout(()=>{for(let i=0;i<this.totalSlides;i++){let t=this.slides[i];t.classList.remove("active"),i===this.activeSlideIndex&&t.classList.add("active"),this.updateFlexibleSize()}},this.duration))}back(){let t=this.activeSlideIndex-1;t<0&&(t=this.totalSlides-1),this.setActiveSlide(t,-1)}forward(){let t=this.activeSlideIndex+1;t>=this.totalSlides&&(t=0),this.setActiveSlide(t,1)}scroll(e){if("fade"!==this.transition&&"none"!==this.transition){const a=this.element.getBoundingClientRect().width;var s=Math.min(1,Math.abs(this.scrollAmount/a));if(!this.navlock){this.isScrolling&&window.clearTimeout(this.isScrolling),this.scrollAmount-=e,Math.abs(this.scrollAmount)>a&&(this.scrollAmount=Math.sign(this.scrollAmount)*a);let t=this.slides[this.activeSlideIndex],i;0<e?(i=this.activeSlideIndex+1<this.totalSlides?this.slides[this.activeSlideIndex+1]:this.slides[0],i.style.transform=`translate3d(calc(100% + ${this.scrollAmount}px), 0, 0)`):(i=this.activeSlideIndex-1<0?this.slides[this.slides.length-1]:this.slides[this.activeSlideIndex-1],i.style.transform=`translate3d(calc(${this.scrollAmount}px - 100%), 0, 0)`),t.style.transform=`translate3d(${this.scrollAmount}px, 0, 0)`,t.style.opacity=1-s,i.style.opacity=s,this.isScrolling=setTimeout(()=>{this.navlock=!0,this.scrollAmount<=-.3*a?(this.navlock=!1,this.forward()):this.scrollAmount>=.3*a?(this.navlock=!1,this.back()):(t.animate([{transform:t.style.transform,opacity:t.style.opacity},{transform:"translate3d(0, 0, 0)",opacity:1}],{duration:this.duration,easing:this.easing}),t.style.transform="translate3d(0, 0, 0)",t.style.opacity=1,0<e?i.animate([{transform:i.style.transform,opacity:i.style.opacity},{transform:"translate3d(100%, 0, 0)",opacity:.33}],{duration:this.duration,easing:this.easing}):i.animate([{transform:i.style.transform,opacity:i.style.opacity},{transform:"translate3d(-100%, 0, 0)",opacity:.33}],{duration:this.duration,easing:this.easing}),i.style.transform="",i.style.opacity=.33,this.navlock=!1),this.scrollAmount=0},50)}}}}window&&(window.Slider=Slider);export{Slider};