class Tagger{static index;element;id;targetImage;containerElement;tagPoints;get imageDimension(){return this.targetImage.getBoundingClientRect()}static init(){this.index=[];var e=document.querySelectorAll(".tagger");for(let t=0;t<e.length;t++){var i=e[t];this.index.push(new this(t,i))}window.addEventListener("resize",()=>{this.resizeListener()})}static getById(e){return this.index.find(t=>t.id===e)}static resizeListener(){for(const t of this.index)t.repositionTags()}constructor(t,e){this.element=e,this.id=this.element.id||"tagger-"+t,this.element.id=this.id,this.targetImage=this.element.querySelector(".image > img"),this.initTagPoints()}initTagPoints(){this.tagPoints=[],this.containerElement=document.createElement("div"),this.containerElement.classList.add("tag-points"),this.element.appendChild(this.containerElement);var s=this.element.querySelectorAll(".tags > .tag");for(let i=0;i<s.length;i++){let t=s[i];var n=t.dataset.label||"",a=t.dataset.x?parseFloat(t.dataset.x):0,l=t.dataset.y?parseFloat(t.dataset.y):0;let e=new TagPoint(this,i,n,a,l);if(this.containerElement.appendChild(e.element),this.tagPoints.push(e),t.dataset.click){const r=t.querySelector("div")?t.querySelector("div"):null;e.element.addEventListener("click",()=>{window[t.dataset.click]({taggerId:this.id,index:i,content:r})})}}}repositionTags(){for(const t of this.tagPoints)t.setPosition()}}class TagPoint{tagger;element;index;label;x;y;constructor(t,e,i,s,n){this.tagger=t,this.index=e,this.label=i,this.x=s,this.y=n,this.element=document.createElement("div"),this.element.classList.add("tag-point"),this.element.dataset.tagger=this.tagger.id,this.element.dataset.index=this.index,this.element.dataset.label=this.label,this.element.dataset.x=this.x,this.element.dataset.y=this.y,this.setPosition()}setPosition(){var t=this.tagger.targetImage.clientWidth*this.x,e=this.tagger.targetImage.clientHeight*this.y;this.element.style.left=t+"px",this.element.style.top=e+"px"}}window&&(window.Tagger=Tagger);export{Tagger,TagPoint};